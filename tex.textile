h1. Tex on OSX with Textmate and Skim and SVN

h2. Setting up xetex

xetex allows proper utf-8 support and using otf fonts

Writhe this into the header of your texfile
<pre>
	%!TEX TS-program = xelatex
	%!TEX encoding = UTF-8 Unicode
</pre>

Your editor of choice should recognize it. When not use command line and run <code>xelatex</code>

*DON'T* use <code>%\usepackage[utf8x]{inputenc}</code> as xetex already manages the encoding. Whenyou use the package you will get weird errors as xetex does soemthing to the file and again the utf8x package prodcing wrong utf8 character sequences.

h2. Using otf fonts

<pre>
	otfinfo --family /Library/Fonts/GaramondPremrPro.otf
</pre>

Your tex distribution should come with <code>otfinfo</code> tool which identifies the name of the font family for use with

<pre>
	\usepackage{fontspec}
	\setromanfont{Bembo Std}
</pre>

I ran into problems under Snow Leopard. The error was something like "... 256..." as if the font wasn't installed. Clearing the font cache with Onyx did the trick, restarting your terminal might also help.

h2. Setting up pdfsync

pdfsync allows switching from the viewer into the editor directly to the line producing the content and vice versa

# Select Skim as my viewer in the Textmate preferences. <code>Bundles > LaTeX > Preferences ... </code>
# Select "View in Skim" from the LaTeX preferences in Textmate.
# Sync (from inside Skim preferences) with Textmate.
# Put the pdfsync.sty file in \user\texmf\tex\latex (normaly comes with distribution)
# Inserted the \usepackage{pdfsync} in my document. (not needed with xetex)
# Forward search with "shift-command-click"  and backward search with "Show in Viewer (pdfsync)".

h3. Setting up TM_LATEX_MASTER

<code>TM_LATEX_MASTER</code> defines the master latex which is called when building the tex from an included file. 

Open project window, press that little "i" button in the drawer. Set up variable

<code>
TM_LATEX_MASTER main.tex
</code>

h2. Skim

Once you have Skim installed, activate Skim > Preferences > Sync > Check for file changes. TextMate should already be entered as the default editor.

h2. Under version control

Tex creates a lot of temporary files that would ony clutter the version control. Create a file called "ignore-these" with the (patterns of) files you want svn to ignore.

<pre>
*.aux
*.bbl
*.blg
*.bst
*.dvi
*.idx
*.lof
*.log
*.pdf
*.toc
*.out
*.synctex.gz
*.glo
*.ind
*.ilg
*.pdfsync
</pre>

Then run
<code>svn -R propset svn:ignore . -F ignore-these<code>

To edit these properties later use
<code>svn propedit svn:ignore .</code>